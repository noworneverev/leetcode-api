<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeetCode Explorer - Browse, Search & Filter All LeetCode Problems</title>

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Explore all 3000+ LeetCode problems with advanced filtering, sorting by likes, difficulty levels, and topics. Free API access to LeetCode question data.">
    <meta name="keywords"
        content="LeetCode, coding problems, algorithm practice, interview preparation, programming challenges, DSA, data structures, competitive programming">
    <meta name="author" content="Yan-Ying Liao">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://leetcode-api.vercel.app/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://leetcode-api.vercel.app/">
    <meta property="og:title" content="LeetCode Explorer - Browse All LeetCode Problems">
    <meta property="og:description"
        content="Explore all 3000+ LeetCode problems with advanced filtering, sorting by likes, and topic tags. Free API access included.">
    <meta property="og:image" content="https://leetcode-api.vercel.app/static/og-image.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://leetcode-api.vercel.app/">
    <meta name="twitter:title" content="LeetCode Explorer - Browse All LeetCode Problems">
    <meta name="twitter:description"
        content="Explore all 3000+ LeetCode problems with advanced filtering, sorting by likes, and topic tags.">

    <!-- Favicon - Code icon in brand colors -->
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="apple-touch-icon" href="/static/favicon.svg">
    <meta name="theme-color" content="#ffa116">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: { 900: '#0a0a0a', 850: '#121212', 800: '#1a1a1a', 700: '#262626', 600: '#363636' },
                        brand: { 50: '#fff7ed', 500: '#ffa116', 600: '#e59113', 900: '#7c2d12' },
                        lc: { easy: '#00b8a3', medium: '#ffc01e', hard: '#ff375f' }
                    }
                }
            }
        }
    </script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/@tanstack/react-table@8.10.7/build/umd/index.production.js"></script>
    <script src="https://unpkg.com/@tanstack/react-virtual@3.0.0-beta.54/build/umd/index.production.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">


    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-thumb {
            background: #666;
            border-radius: 4px;
        }

        .cell {
            padding: 10px 12px;
            display: flex;
            align-items: center;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            min-width: 0;
        }

        @media (max-width: 640px) {
            .cell {
                padding: 8px 8px;
                font-size: 13px;
            }
        }

        /* Dark mode select dropdown fix */
        .dark select {
            color-scheme: dark;
        }

        .dark select option {
            background-color: #1a1a1a;
            color: #e5e5e5;
        }

        select:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(255, 161, 22, 0.3);
        }
    </style>
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
</head>

<body class="bg-gray-100 text-gray-900 dark:bg-dark-900 dark:text-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef, useCallback } = React;
        const { useReactTable, getCoreRowModel, getFilteredRowModel, getSortedRowModel, flexRender, createColumnHelper } = ReactTable;
        const { useVirtualizer } = ReactVirtual;

        function DebouncedInput({ value: initialValue, onChange, debounce = 300, ...props }) {
            const [value, setValue] = useState(initialValue);
            useEffect(() => setValue(initialValue), [initialValue]);
            useEffect(() => { const t = setTimeout(() => onChange(value), debounce); return () => clearTimeout(t); }, [value]);
            return <input {...props} value={value} onChange={e => setValue(e.target.value)} />;
        }

        function SelectFilter({ column, options, label, icon }) {
            if (!column) return null;
            const filterValue = column.getFilterValue();
            const hasValue = filterValue != null && filterValue !== '';
            return (
                <div className="relative">
                    <select
                        value={filterValue ?? ''}
                        onChange={e => column.setFilterValue(e.target.value || undefined)}
                        className={`appearance-none pl-8 pr-8 py-2 text-sm rounded-lg border transition-all cursor-pointer
                            ${hasValue
                                ? 'border-brand-500 bg-brand-50 dark:bg-brand-500/20 text-brand-700 dark:text-brand-300 font-medium'
                                : 'border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-700 dark:text-gray-200 hover:border-gray-400 dark:hover:border-dark-500'
                            }`}
                    >
                        <option value="">All {label}</option>
                        {options.map(o => <option key={o.value} value={o.value}>{o.label}</option>)}
                    </select>
                    <i className={`${icon} absolute left-2.5 top-1/2 -translate-y-1/2 text-xs ${hasValue ? 'text-brand-500' : 'text-gray-400'}`}></i>
                    <i className="fas fa-chevron-down absolute right-2.5 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none"></i>
                </div>
            );
        }

        function MultiSelectFilter({ column, options, label, icon }) {
            if (!column) return null;
            const [open, setOpen] = useState(false);
            const btnRef = useRef(null);
            const filterValue = column.getFilterValue() || [];
            const hasValue = filterValue.length > 0;
            const toggle = (val) => {
                const next = filterValue.includes(val) ? filterValue.filter(v => v !== val) : [...filterValue, val];
                column.setFilterValue(next.length ? next : undefined);
            };
            useEffect(() => {
                if (!open) return;
                const handler = (e) => { if (btnRef.current && !btnRef.current.closest('.msfwrap')?.contains(e.target)) setOpen(false); };
                document.addEventListener('click', handler);
                return () => document.removeEventListener('click', handler);
            }, [open]);
            return (
                <div className="relative msfwrap" ref={btnRef}>
                    <button onClick={() => setOpen(!open)}
                        className={`appearance-none pl-8 pr-8 py-2 text-sm rounded-lg border transition-all cursor-pointer flex items-center gap-1
                            ${hasValue
                                ? 'border-brand-500 bg-brand-50 dark:bg-brand-500/20 text-brand-700 dark:text-brand-300 font-medium'
                                : 'border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 text-gray-700 dark:text-gray-200 hover:border-gray-400 dark:hover:border-dark-500'
                            }`}>
                        {hasValue ? `${label} (${filterValue.length})` : `All ${label}`}
                    </button>
                    <i className={`${icon} absolute left-2.5 top-1/2 -translate-y-1/2 text-xs ${hasValue ? 'text-brand-500' : 'text-gray-400'} pointer-events-none`}></i>
                    <i className={`fas fa-chevron-down absolute right-2.5 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none`}></i>
                    {open && (
                        <div className="absolute top-full mt-1 left-0 z-50 bg-white dark:bg-dark-800 rounded-lg shadow-xl border border-gray-200 dark:border-dark-600 py-1 min-w-[160px]">
                            {options.map(o => {
                                const checked = filterValue.includes(o.value);
                                return (
                                    <label key={o.value} className="flex items-center gap-2.5 px-3 py-1.5 hover:bg-gray-50 dark:hover:bg-dark-700 cursor-pointer">
                                        <input type="checkbox" checked={checked} onChange={() => toggle(o.value)}
                                            className="rounded border-gray-300 text-brand-500 focus:ring-brand-500" style={{ width: 14, height: 14 }} />
                                        <span className="text-xs font-medium">{o.label}</span>
                                    </label>
                                );
                            })}
                            {hasValue && (
                                <div className="border-t border-gray-100 dark:border-dark-700 mt-1 pt-1 px-3 pb-1">
                                    <button onClick={() => column.setFilterValue(undefined)} className="text-[11px] text-red-500 hover:underline font-medium">Clear</button>
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        }

        function CheckboxFilterDropdown({ column, allOptions }) {
            if (!column) return null;
            const [open, setOpen] = useState(false);
            const [search, setSearch] = useState('');
            const [pos, setPos] = useState({ top: 0, left: 0 });
            const btnRef = useRef(null);
            const filterValue = column.getFilterValue() || [];
            const hasValue = filterValue.length > 0;

            const filtered = search
                ? allOptions.filter(o => o.value.toLowerCase().includes(search.toLowerCase()))
                : allOptions;

            const toggle = (val) => {
                const next = filterValue.includes(val) ? filterValue.filter(v => v !== val) : [...filterValue, val];
                column.setFilterValue(next.length ? next : undefined);
            };

            const selectAll = () => column.setFilterValue(filtered.map(o => o.value));
            const clearAll = () => column.setFilterValue(undefined);

            const handleOpen = () => {
                if (!open && btnRef.current) {
                    const rect = btnRef.current.getBoundingClientRect();
                    setPos({ top: rect.bottom + 4, left: rect.left });
                }
                setOpen(!open);
                setSearch('');
            };

            return (
                <div className="relative" onClick={e => e.stopPropagation()}>
                    <button ref={btnRef} onClick={handleOpen}
                        className={`ml-1 w-5 h-5 rounded flex items-center justify-center text-[10px] transition-colors
                            ${hasValue ? 'text-brand-500 bg-brand-500/10' : 'text-gray-400 hover:text-gray-600 dark:hover:text-gray-300'}`}
                        title="Filter topics">
                        <i className="fas fa-filter"></i>
                        {hasValue && <span className="absolute -top-1 -right-1 w-3.5 h-3.5 bg-brand-500 text-white text-[8px] rounded-full flex items-center justify-center font-bold">{filterValue.length}</span>}
                    </button>
                    {open && ReactDOM.createPortal(<>
                        <div className="fixed inset-0 z-[9998]" onClick={() => setOpen(false)}></div>
                        <div className="fixed w-64 bg-white dark:bg-dark-800 rounded-xl shadow-2xl border border-gray-200 dark:border-dark-600 z-[9999] overflow-hidden"
                            style={{ top: pos.top, left: pos.left, maxHeight: 360 }}>
                            <div className="p-2 border-b border-gray-100 dark:border-dark-700">
                                <div className="relative">
                                    <i className="fas fa-search absolute left-2.5 top-1/2 -translate-y-1/2 text-xs text-gray-400"></i>
                                    <input type="text" placeholder="Search topics..." value={search} onChange={e => setSearch(e.target.value)}
                                        className="w-full pl-8 pr-3 py-1.5 text-xs rounded-lg border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700 outline-none focus:ring-1 focus:ring-brand-500" />
                                </div>
                                <div className="flex gap-2 mt-2">
                                    <button onClick={selectAll} className="text-[11px] text-blue-600 dark:text-blue-400 hover:underline font-medium">Select All</button>
                                    <button onClick={clearAll} className="text-[11px] text-red-500 hover:underline font-medium">Clear All</button>
                                    {hasValue && <span className="text-[11px] text-gray-400 ml-auto">{filterValue.length} selected</span>}
                                </div>
                            </div>
                            <div className="overflow-y-auto" style={{ maxHeight: 280 }}>
                                {filtered.map(o => {
                                    const checked = filterValue.includes(o.value);
                                    return (
                                        <label key={o.value} className="flex items-center gap-2 px-3 py-1.5 hover:bg-gray-50 dark:hover:bg-dark-700 cursor-pointer">
                                            <input type="checkbox" checked={checked} onChange={() => toggle(o.value)}
                                                className="rounded border-gray-300 text-brand-500 focus:ring-brand-500" style={{ width: 14, height: 14 }} />
                                            <span className="text-xs flex-1 truncate">{o.value}</span>
                                            <span className="text-[10px] text-gray-400 tabular-nums">{o.count}</span>
                                        </label>
                                    );
                                })}
                                {filtered.length === 0 && <div className="p-3 text-xs text-gray-400 text-center">No topics found</div>}
                            </div>
                        </div>
                    </>, document.body)}
                </div>
            );
        }

        function ColumnDropdown({ table }) {
            const [open, setOpen] = useState(false);
            const allColumns = table.getAllLeafColumns();

            return (
                <div className="relative">
                    <button onClick={() => setOpen(!open)} className="px-3 py-1.5 text-sm rounded-lg border border-gray-300 dark:border-dark-600 bg-white dark:bg-dark-700 flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-dark-600">
                        <i className="fas fa-columns"></i>
                        <span className="hidden sm:inline">Columns</span>
                        <i className={`fas fa-chevron-down text-xs transition-transform ${open ? 'rotate-180' : ''}`}></i>
                    </button>
                    {open && <>
                        <div className="fixed inset-0 z-40" onClick={() => setOpen(false)}></div>
                        <div className="absolute right-0 mt-1 w-52 bg-white dark:bg-dark-800 rounded-xl shadow-2xl border border-gray-200 dark:border-dark-600 z-50 py-2 max-h-80 overflow-y-auto">
                            <div className="px-3 py-2 border-b border-gray-100 dark:border-dark-700">
                                <label className="flex items-center gap-2 cursor-pointer">
                                    <input
                                        type="checkbox"
                                        checked={table.getIsAllColumnsVisible()}
                                        onChange={table.getToggleAllColumnsVisibilityHandler()}
                                        className="rounded border-gray-300"
                                    />
                                    <span className="text-sm font-semibold">Show All</span>
                                </label>
                            </div>
                            {allColumns.map(col => (
                                <label key={col.id} className="flex items-center gap-2 px-3 py-2 hover:bg-gray-50 dark:hover:bg-dark-700 cursor-pointer">
                                    <input
                                        type="checkbox"
                                        checked={col.getIsVisible()}
                                        onChange={col.getToggleVisibilityHandler()}
                                        className="rounded border-gray-300"
                                    />
                                    <span className="text-sm">{col.columnDef.meta?.label || col.id}</span>
                                </label>
                            ))}
                        </div>
                    </>}
                </div>
            );
        }

        function App() {
            const [data, setData] = useState([]);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
            const [darkMode, setDarkMode] = useState(() => localStorage.getItem('theme') === 'dark' || (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches));
            const [globalFilter, setGlobalFilter] = useState('');
            const [columnFilters, setColumnFilters] = useState([]);
            const [sorting, setSorting] = useState([{ id: 'likes', desc: true }]);
            const [columnVisibility, setColumnVisibility] = useState({
                done: true, frontendId: true, title: true, likes: true, dislikes: true, likeRatio: true, problemSets: true, topicTags: true, difficulty: true, paidOnly: true,
                accepted: false, submissions: false, acRate: false, hasSolution: false, hasVideoSolution: false, category: false,
            });

            // Problem sets state
            const [problemSetsData, setProblemSetsData] = useState([]);

            // Done questions tracking with localStorage
            const [doneQuestions, setDoneQuestions] = useState(() => {
                try {
                    const saved = localStorage.getItem('leetcode-done-questions');
                    return saved ? new Set(JSON.parse(saved)) : new Set();
                } catch {
                    return new Set();
                }
            });

            // Persist done questions to localStorage
            useEffect(() => {
                localStorage.setItem('leetcode-done-questions', JSON.stringify([...doneQuestions]));
            }, [doneQuestions]);

            const toggleDone = useCallback((questionId) => {
                setDoneQuestions(prev => {
                    const next = new Set(prev);
                    if (next.has(questionId)) {
                        next.delete(questionId);
                    } else {
                        next.add(questionId);
                    }
                    return next;
                });
            }, []);

            // LeetCode username sync
            const [syncUsername, setSyncUsername] = useState(() => localStorage.getItem('leetcode-sync-username') || '');
            const [syncSession, setSyncSession] = useState(() => localStorage.getItem('leetcode-sync-session') || '');
            const [syncStatus, setSyncStatus] = useState(null); // null | 'loading' | {ok, count, newCount, msg}
            const [showSession, setShowSession] = useState(false);
            const [syncMode, setSyncMode] = useState(() => localStorage.getItem('leetcode-sync-mode') || 'merge'); // 'merge' | 'replace'

            const handleSync = useCallback(async () => {
                const username = syncUsername.trim();
                if (!username) return;
                localStorage.setItem('leetcode-sync-username', username);
                if (syncSession) localStorage.setItem('leetcode-sync-session', syncSession);
                localStorage.setItem('leetcode-sync-mode', syncMode);
                setSyncStatus('loading');
                try {
                    let url = `/user/${encodeURIComponent(username)}/solved`;
                    if (syncSession.trim()) {
                        url += `?x_leetcode_session=${encodeURIComponent(syncSession.trim())}`;
                    }
                    const res = await fetch(url);
                    if (!res.ok) {
                        const err = await res.json().catch(() => ({}));
                        setSyncStatus({ ok: false, msg: err.detail || 'Failed to fetch' });
                        return;
                    }
                    const json = await res.json();
                    const slugSet = new Set(json.solved_slugs || []);
                    const syncedIds = new Set();
                    data.forEach(d => { if (slugSet.has(d.slug)) syncedIds.add(d.id); });

                    setDoneQuestions(prev => {
                        if (syncMode === 'replace') {
                            return syncedIds;
                        }
                        // merge mode: union existing + synced
                        const next = new Set(prev);
                        syncedIds.forEach(id => next.add(id));
                        return next;
                    });

                    const prevCount = doneQuestions.size;
                    localStorage.setItem('leetcode-last-sync', new Date().toISOString());
                    setSyncStatus({
                        ok: true,
                        count: json.total_solved,
                        matched: syncedIds.size,
                        mode: syncMode,
                    });
                } catch (e) {
                    setSyncStatus({ ok: false, msg: e.message });
                }
            }, [syncUsername, syncSession, syncMode, data, doneQuestions]);

            const clearAllDone = useCallback(() => {
                if (window.confirm(`Clear all ${doneQuestions.size} marked problems? This cannot be undone.`)) {
                    setDoneQuestions(new Set());
                    setSyncStatus(null);
                }
            }, [doneQuestions]);

            const clearSession = useCallback(() => {
                setSyncSession('');
                localStorage.removeItem('leetcode-sync-session');
            }, []);

            useEffect(() => {
                document.documentElement.classList.toggle('dark', darkMode);
                localStorage.setItem('theme', darkMode ? 'dark' : 'light');
            }, [darkMode]);

            useEffect(() => {
                (async () => {
                    try {
                        // Fetch both questions and problem sets concurrently
                        const [questionsRes, problemSetsRes] = await Promise.all([
                            fetch('/data/leetcode_questions.json'),
                            fetch('/data/problem_sets.json').catch(() => null) // Optional fetch
                        ]);

                        if (!questionsRes.ok) throw new Error('Failed to fetch questions');
                        const json = await questionsRes.json();

                        // Parse problem sets if available
                        let setsData = [];
                        let slugToSets = {};
                        if (problemSetsRes && problemSetsRes.ok) {
                            setsData = await problemSetsRes.json();
                            setProblemSetsData(setsData);

                            // Build lookup map for faster mapping
                            setsData.forEach(set => {
                                set.slugs.forEach(slug => {
                                    if (!slugToSets[slug]) slugToSets[slug] = [];
                                    slugToSets[slug].push(set.name);
                                });
                            });
                        }

                        const arr = Array.isArray(json) ? json : Object.values(json);
                        setData(arr.map(item => {
                            const q = item.data?.question || item;
                            let stats = {};
                            try { if (q.stats) stats = JSON.parse(q.stats); } catch { }
                            const likes = q.likes || 0, dislikes = q.dislikes || 0;
                            const slug = q.titleSlug || (q.title ? q.title.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '').replace(/-+/g, '-').replace(/^-+|-+$/g, '') : '');
                            return {
                                id: q.questionId,
                                frontendId: q.questionFrontendId,
                                title: q.title,
                                slug,
                                difficulty: q.difficulty,
                                paidOnly: q.paidOnly || q.isPaidOnly || false,
                                hasSolution: q.hasSolution || false,
                                hasVideoSolution: q.hasVideoSolution || false,
                                likes,
                                dislikes,
                                likeRatio: likes + dislikes > 0 ? ((likes / (likes + dislikes)) * 100).toFixed(1) : '0.0',
                                acRate: stats.acRate || null,
                                accepted: stats.totalAccepted || null,
                                submissions: stats.totalSubmission || null,
                                topicTags: (q.topicTags || []).map(t => t.name),
                                problemSets: slugToSets[slug] || [],
                                category: q.categoryTitle || '',
                            };
                        }).filter(q => q.id));
                    } catch (e) { setError(e.message); } finally { setLoading(false); }
                })();
            }, []);

            const columnHelper = createColumnHelper();

            const columns = useMemo(() => [
                columnHelper.accessor(row => doneQuestions.has(row.id), {
                    id: 'done',
                    header: '✓',
                    cell: i => {
                        const questionId = i.row.original.id;
                        const isDone = doneQuestions.has(questionId);
                        return (
                            <button
                                onClick={(e) => { e.stopPropagation(); toggleDone(questionId); }}
                                className={`w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all
                                    ${isDone
                                        ? 'bg-green-500 border-green-500 text-white shadow-sm'
                                        : 'border-gray-300 dark:border-dark-600 hover:border-green-400 dark:hover:border-green-500'
                                    }`}
                                title={isDone ? 'Mark as not done' : 'Mark as done'}
                            >
                                {isDone && <i className="fas fa-check text-xs"></i>}
                            </button>
                        );
                    },
                    size: 50,
                    meta: { label: 'Done' },
                    filterFn: (row, columnId, filterValue) => {
                        const isDone = doneQuestions.has(row.original.id);
                        if (filterValue === 'done') return isDone;
                        if (filterValue === 'notdone') return !isDone;
                        return true;
                    },
                    enableSorting: false,
                }),
                columnHelper.accessor('frontendId', {
                    id: 'frontendId',
                    header: 'ID',
                    cell: i => <span className="text-gray-500 font-mono text-sm">{i.getValue()}</span>,
                    size: 70,
                    meta: { label: 'ID' },
                    enableColumnFilter: false,
                }),
                columnHelper.accessor('title', {
                    id: 'title',
                    header: 'Title',
                    cell: i => {
                        const slug = i.row.original.slug;
                        const url = slug ? `https://leetcode.com/problems/${slug}/` : '#';
                        return (
                            <a href={url} target="_blank" rel="noopener noreferrer"
                                className="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 hover:underline font-medium text-sm truncate block">
                                {i.getValue()}
                            </a>
                        );
                    },
                    size: 300,
                    meta: { label: 'Title' },
                    enableColumnFilter: true,
                }),
                columnHelper.accessor('likes', {
                    id: 'likes',
                    header: 'Likes',
                    cell: i => <span className="text-green-600 dark:text-green-400 font-semibold text-sm">{(i.getValue() || 0).toLocaleString()}</span>,
                    size: 95,
                    meta: { label: 'Likes' },
                    enableColumnFilter: false,
                }),
                columnHelper.accessor('dislikes', {
                    id: 'dislikes',
                    header: 'Dislikes',
                    cell: i => <span className="text-red-500 font-semibold text-sm">{(i.getValue() || 0).toLocaleString()}</span>,
                    size: 100,
                    meta: { label: 'Dislikes' },
                    enableColumnFilter: false,
                }),
                columnHelper.accessor('likeRatio', {
                    id: 'likeRatio',
                    header: 'Like Ratio',
                    cell: i => {
                        const v = parseFloat(i.getValue()) || 0;
                        return <span className={`font-bold text-sm ${v >= 80 ? 'text-green-600' : v >= 50 ? 'text-yellow-600' : 'text-red-500'}`}>{i.getValue()}%</span>;
                    },
                    size: 105,
                    meta: { label: 'Like Ratio' },
                    enableColumnFilter: false,
                }),
                columnHelper.accessor('topicTags', {
                    id: 'topicTags',
                    header: 'Topics',
                    cell: i => {
                        const t = i.getValue() || [];
                        return (
                            <div className="flex gap-1 overflow-hidden">
                                {t.slice(0, 2).map((x, j) => <span key={j} className="shrink-0 px-2 py-0.5 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300">{x}</span>)}
                                {t.length > 2 && <span className="shrink-0 text-xs text-gray-400 ml-1">+{t.length - 2}</span>}
                            </div>
                        );
                    },
                    size: 220,
                    meta: { label: 'Topics', hasDropdownFilter: true },
                    filterFn: (row, columnId, filterValue) => {
                        if (!filterValue || !filterValue.length) return true;
                        const tags = row.getValue(columnId) || [];
                        return filterValue.some(f => tags.includes(f));
                    },
                }),
                columnHelper.accessor('problemSets', {
                    id: 'problemSets',
                    header: 'Sets',
                    cell: i => {
                        const s = i.getValue() || [];
                        if (s.length === 0) return null;
                        return (
                            <div className="flex gap-1 overflow-hidden">
                                {s.map((x, j) => {
                                    const isNeetcode = x.toLowerCase().includes('neetcode');
                                    const isBlind75 = x.toLowerCase().includes('blind');
                                    let bgClass = "bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300"; // default
                                    if (isNeetcode) bgClass = "bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-300";
                                    else if (isBlind75) bgClass = "bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300";

                                    return <span key={j} className={`shrink-0 px-2 py-0.5 text-xs rounded font-medium ${bgClass}`}>{x}</span>
                                })}
                            </div>
                        );
                    },
                    size: 150,
                    meta: { label: 'Sets', hasDropdownFilter: true },
                    filterFn: (row, columnId, filterValue) => {
                        if (!filterValue || !filterValue.length) return true;
                        const sets = row.getValue(columnId) || [];
                        return filterValue.some(f => sets.includes(f));
                    },
                }),
                columnHelper.accessor('difficulty', {
                    id: 'difficulty',
                    header: 'Difficulty',
                    cell: i => {
                        const d = i.getValue();
                        const colors = { Easy: 'bg-lc-easy/15 text-lc-easy', Medium: 'bg-lc-medium/15 text-lc-medium', Hard: 'bg-lc-hard/15 text-lc-hard' };
                        return <span className={`px-2 py-0.5 rounded text-xs font-bold ${colors[d] || ''}`}>{d}</span>;
                    },
                    size: 105,
                    filterFn: (row, columnId, filterValue) => {
                        if (!filterValue || !filterValue.length) return true;
                        return filterValue.includes(row.getValue(columnId));
                    },
                    meta: { label: 'Difficulty' },
                }),
                columnHelper.accessor('accepted', {
                    id: 'accepted',
                    header: 'Accepted',
                    cell: i => <span className="text-gray-600 dark:text-gray-400 text-sm">{i.getValue() || '-'}</span>,
                    size: 110,
                    meta: { label: 'Accepted' },
                    enableColumnFilter: false,
                }),
                columnHelper.accessor('submissions', {
                    id: 'submissions',
                    header: 'Submissions',
                    cell: i => <span className="text-gray-600 dark:text-gray-400 text-sm">{i.getValue() || '-'}</span>,
                    size: 120,
                    meta: { label: 'Submissions' },
                    enableColumnFilter: false,
                }),
                columnHelper.accessor('acRate', {
                    id: 'acRate',
                    header: 'AC Rate',
                    cell: i => <span className="text-gray-600 dark:text-gray-400 text-sm">{i.getValue() || '-'}</span>,
                    size: 100,
                    meta: { label: 'AC Rate' },
                    enableColumnFilter: false,
                }),
                columnHelper.accessor('paidOnly', {
                    id: 'paidOnly',
                    header: 'Access',
                    cell: i => i.getValue()
                        ? <span className="text-amber-600 dark:text-amber-400 text-xs font-semibold"><i className="fas fa-crown mr-1"></i>Pro</span>
                        : <span className="text-green-600 dark:text-green-400 text-xs font-semibold">Free</span>,
                    size: 85,
                    filterFn: (row, columnId, filterValue) => {
                        const val = row.getValue(columnId);
                        if (filterValue === 'free') return val === false;
                        if (filterValue === 'premium') return val === true;
                        return true;
                    },
                    meta: { label: 'Access' },
                }),
                columnHelper.accessor('hasSolution', {
                    id: 'hasSolution',
                    header: 'Solution',
                    cell: i => i.getValue()
                        ? <span className="text-green-500"><i className="fas fa-check-circle"></i></span>
                        : <span className="text-gray-300 dark:text-gray-600">—</span>,
                    size: 90,
                    filterFn: (row, columnId, filterValue) => {
                        const val = row.getValue(columnId);
                        if (filterValue === 'yes') return val === true;
                        if (filterValue === 'no') return val === false;
                        return true;
                    },
                    meta: { label: 'Solution' },
                }),
                columnHelper.accessor('hasVideoSolution', {
                    id: 'hasVideoSolution',
                    header: 'Video',
                    cell: i => i.getValue()
                        ? <span className="text-red-500"><i className="fab fa-youtube"></i></span>
                        : <span className="text-gray-300 dark:text-gray-600">—</span>,
                    size: 80,
                    meta: { label: 'Video' },
                    enableColumnFilter: false,
                }),
                columnHelper.accessor('category', {
                    id: 'category',
                    header: 'Category',
                    cell: i => <span className="text-gray-600 dark:text-gray-400 text-sm">{i.getValue()}</span>,
                    size: 115,
                    meta: { label: 'Category' },
                    enableColumnFilter: false,
                }),
            ], [doneQuestions, toggleDone]);

            const table = useReactTable({
                data,
                columns,
                state: { globalFilter, columnFilters, sorting, columnVisibility },
                onGlobalFilterChange: setGlobalFilter,
                onColumnFiltersChange: setColumnFilters,
                onSortingChange: setSorting,
                onColumnVisibilityChange: setColumnVisibility,
                getCoreRowModel: getCoreRowModel(),
                getFilteredRowModel: getFilteredRowModel(),
                getSortedRowModel: getSortedRowModel(),
                globalFilterFn: 'includesString',
                columnResizeMode: 'onChange',
            });

            const { rows } = table.getRowModel();
            const visibleCols = table.getVisibleLeafColumns();
            const gridCols = visibleCols.map(c => `${c.getSize()}px`).join(' ');

            // Compute unique topics with counts for the filter dropdown
            const allTopics = useMemo(() => {
                const counts = {};
                data.forEach(d => (d.topicTags || []).forEach(t => { counts[t] = (counts[t] || 0) + 1; }));
                return Object.entries(counts).sort((a, b) => a[0].localeCompare(b[0])).map(([value, count]) => ({ value, count }));
            }, [data]);

            // Compute available problem sets for filter
            const allProblemSets = useMemo(() => {
                return problemSetsData.map(set => ({
                    value: set.name,
                    count: data.filter(d => d.problemSets?.includes(set.name)).length
                })).filter(s => s.count > 0);
            }, [problemSetsData, data]);

            const containerRef = useRef(null);
            const rowVirtualizer = useVirtualizer({
                count: rows.length,
                getScrollElement: () => containerRef.current,
                estimateSize: () => 44,
                overscan: 20
            });

            const stats = useMemo(() => ({
                total: data.length,
                easy: data.filter(d => d.difficulty === 'Easy').length,
                medium: data.filter(d => d.difficulty === 'Medium').length,
                hard: data.filter(d => d.difficulty === 'Hard').length,
                done: data.filter(d => doneQuestions.has(d.id)).length
            }), [data, doneQuestions]);

            // Get columns for filters - ensure they exist
            const difficultyColumn = table.getColumn('difficulty');
            const paidOnlyColumn = table.getColumn('paidOnly');
            const hasSolutionColumn = table.getColumn('hasSolution');
            const doneColumn = table.getColumn('done');

            if (loading) return (
                <div className="flex h-screen items-center justify-center bg-gray-100 dark:bg-dark-900">
                    <div className="text-center">
                        <div style={{
                            width: 40, height: 40, border: '4px solid #e5e7eb', borderTopColor: '#ffa116',
                            borderRadius: '50%', animation: 'spin 0.8s linear infinite', margin: '0 auto 16px'
                        }}></div>
                        <p className="text-gray-500 dark:text-gray-400 text-sm">Loading...</p>
                        <style>{`@keyframes spin { to { transform: rotate(360deg); } }`}</style>
                    </div>
                </div>
            );

            if (error) return (
                <div className="flex h-screen items-center justify-center bg-gray-100 dark:bg-dark-900 text-red-500">{error}</div>
            );

            return (
                <div className="h-screen flex flex-col bg-gray-100 dark:bg-dark-900">
                    {/* Header */}
                    <header className="bg-white dark:bg-dark-850 border-b border-gray-200 dark:border-dark-700 px-3 sm:px-6 py-3">
                        <div className="max-w-[1800px] mx-auto">
                            {/* Top row */}
                            <div className="flex items-center justify-between gap-3 flex-wrap">
                                <div className="flex items-center gap-3">
                                    <div className="w-10 h-10 bg-gradient-to-br from-brand-500 to-orange-500 rounded-xl flex items-center justify-center shadow-lg shadow-brand-500/20">
                                        <i className="fas fa-code text-white"></i>
                                    </div>
                                    <div>
                                        <h1 className="text-lg sm:text-xl font-bold dark:text-white">LeetCode Explorer</h1>
                                        <div className="text-xs text-gray-500 flex gap-2 sm:gap-3 flex-wrap items-center">
                                            <span className="text-green-500 font-semibold">Done: {stats.done}</span>
                                            <span className="text-lc-easy">Easy: {stats.easy}</span>
                                            <span className="text-lc-medium">Medium: {stats.medium}</span>
                                            <span className="text-lc-hard">Hard: {stats.hard}</span>
                                            <span className="text-gray-400 hidden sm:inline">| Total: {stats.total}</span>
                                            <span className="text-green-500 hidden sm:inline-flex items-center gap-1" title="Data syncs daily from LeetCode">
                                                | <i className="fas fa-check-circle"></i> Updated daily
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                <div className="flex items-center gap-2">
                                    {/* Done count badge */}
                                    {doneQuestions.size > 0 && (
                                        <span className="px-2 py-1 text-xs font-bold rounded-lg bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 whitespace-nowrap" title="Problems marked as done">
                                            <i className="fas fa-check-circle mr-1"></i>{doneQuestions.size} done
                                        </span>
                                    )}

                                    {/* LeetCode Sync */}
                                    <div className="flex items-center gap-1.5">
                                        <div className="relative">
                                            <i className="fas fa-user absolute left-2.5 top-1/2 -translate-y-1/2 text-xs text-gray-400"></i>
                                            <input
                                                type="text"
                                                placeholder="LeetCode username"
                                                value={syncUsername}
                                                onChange={e => setSyncUsername(e.target.value)}
                                                onKeyDown={e => e.key === 'Enter' && handleSync()}
                                                className="pl-8 pr-2 py-2 w-36 sm:w-44 text-sm rounded-lg border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-800 outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent"
                                            />
                                        </div>
                                        <button onClick={() => setShowSession(!showSession)} title="Session cookie & sync settings"
                                            className={`w-9 h-9 rounded-lg flex items-center justify-center transition-all ${showSession ? 'bg-amber-500 text-white' : 'bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600'}`}>
                                            <i className="fas fa-cog text-xs"></i>
                                        </button>
                                        <button onClick={handleSync} disabled={syncStatus === 'loading' || !syncUsername.trim()}
                                            className={`px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-1.5 transition-all
                                                ${syncStatus === 'loading' ? 'bg-gray-400 cursor-wait' : 'bg-purple-600 hover:bg-purple-700 shadow-lg shadow-purple-600/20'} text-white`}>
                                            {syncStatus === 'loading'
                                                ? <><i className="fas fa-spinner fa-spin"></i><span className="hidden sm:inline">Syncing...</span></>
                                                : <><i className="fas fa-sync-alt"></i><span className="hidden sm:inline">Sync</span></>}
                                        </button>
                                        {doneQuestions.size > 0 && (
                                            <button onClick={clearAllDone} title="Clear all done marks"
                                                className="w-9 h-9 rounded-lg bg-gray-100 dark:bg-dark-700 hover:bg-red-100 dark:hover:bg-red-900/30 hover:text-red-500 flex items-center justify-center transition-all text-gray-400">
                                                <i className="fas fa-trash-alt text-xs"></i>
                                            </button>
                                        )}
                                        {syncStatus && syncStatus !== 'loading' && (
                                            <span className={`text-xs font-medium whitespace-nowrap ${syncStatus.ok ? 'text-green-500' : 'text-red-500'}`}>
                                                {syncStatus.ok
                                                    ? `✓ ${syncStatus.matched} matched${syncStatus.mode === 'replace' ? ' (replaced)' : ''}`
                                                    : syncStatus.msg}
                                            </span>
                                        )}
                                    </div>

                                    <a href="/docs" target="_blank" className="px-3 py-2 bg-brand-500 hover:bg-brand-600 text-white rounded-lg text-sm font-medium shadow-lg shadow-brand-500/20 flex items-center gap-1.5">
                                        <i className="fas fa-book"></i><span className="hidden sm:inline">API Docs</span>
                                    </a>
                                    <a href="https://docs.google.com/spreadsheets/d/1sRWp95wqo3a7lLBbtNd_3KkTyGjx_9sctTOL5JOb6pA" target="_blank" className="px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium shadow-lg shadow-green-600/20 flex items-center gap-1.5">
                                        <i className="fas fa-table"></i><span className="hidden sm:inline">Sheet</span>
                                    </a>
                                    <button onClick={() => setDarkMode(!darkMode)} className="w-10 h-10 rounded-lg bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600 flex items-center justify-center">
                                        {darkMode ? <i className="fas fa-sun text-yellow-500"></i> : <i className="fas fa-moon text-gray-600"></i>}
                                    </button>
                                    <a href="https://github.com/noworneverev/leetcode-api" target="_blank" className="w-10 h-10 rounded-lg bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600 flex items-center justify-center">
                                        <i className="fab fa-github text-lg"></i>
                                    </a>
                                </div>
                            </div>

                            {/* Sync settings panel (collapsible) */}
                            {showSession && (
                                <div className="mt-2 p-3 rounded-lg bg-gray-50 dark:bg-dark-800 border border-gray-200 dark:border-dark-600 space-y-2.5">
                                    {/* Session cookie input */}
                                    <div className="flex items-center gap-2">
                                        <i className="fas fa-key text-amber-500 text-sm shrink-0"></i>
                                        <input
                                            type="password"
                                            placeholder="Paste your LEETCODE_SESSION cookie here..."
                                            value={syncSession}
                                            onChange={e => setSyncSession(e.target.value)}
                                            className="flex-1 px-3 py-1.5 text-sm rounded-md border border-gray-200 dark:border-dark-600 bg-white dark:bg-dark-700 outline-none focus:ring-2 focus:ring-amber-400"
                                        />
                                        {syncSession && (
                                            <button onClick={clearSession} title="Clear saved cookie"
                                                className="text-xs text-red-400 hover:text-red-500 px-2 py-1 rounded hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors">
                                                <i className="fas fa-times"></i>
                                            </button>
                                        )}
                                        <span className="text-xs text-gray-400 hidden md:block whitespace-nowrap">
                                            DevTools → Application → Cookies
                                        </span>
                                    </div>
                                    {/* Sync mode toggle */}
                                    <div className="flex items-center gap-3">
                                        <span className="text-xs text-gray-500 dark:text-gray-400">Sync mode:</span>
                                        <button onClick={() => setSyncMode('merge')}
                                            className={`px-2.5 py-1 text-xs rounded-md border transition-all font-medium ${syncMode === 'merge'
                                                ? 'border-purple-400 bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-300'
                                                : 'border-gray-300 dark:border-dark-600 text-gray-500 hover:border-gray-400'}`}>
                                            <i className="fas fa-plus-circle mr-1"></i>Merge
                                        </button>
                                        <button onClick={() => setSyncMode('replace')}
                                            className={`px-2.5 py-1 text-xs rounded-md border transition-all font-medium ${syncMode === 'replace'
                                                ? 'border-orange-400 bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-300'
                                                : 'border-gray-300 dark:border-dark-600 text-gray-500 hover:border-gray-400'}`}>
                                            <i className="fas fa-exchange-alt mr-1"></i>Replace
                                        </button>
                                        <span className="text-[11px] text-gray-400 hidden sm:block">
                                            {syncMode === 'merge' ? 'Adds synced results to existing marks' : 'Replaces all marks with synced results only'}
                                        </span>
                                    </div>
                                    {/* Info text */}
                                    {!syncSession && (
                                        <p className="text-[11px] text-gray-400 leading-relaxed">
                                            <i className="fas fa-info-circle mr-1"></i>
                                            Without a session cookie, only the 20 most recent solved problems can be synced.
                                            Add your <strong>LEETCODE_SESSION</strong> cookie for full history.
                                        </p>
                                    )}
                                </div>
                            )}

                            {/* Search & Filters row */}
                            <div className="flex items-center gap-2 sm:gap-3 mt-3 flex-wrap">
                                <div className="relative flex-1 min-w-[150px] max-w-md">
                                    <i className="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                    <DebouncedInput
                                        type="text"
                                        placeholder="Search problems..."
                                        value={globalFilter ?? ''}
                                        onChange={v => setGlobalFilter(String(v))}
                                        className="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-800 text-sm focus:ring-2 focus:ring-brand-500 focus:border-transparent outline-none"
                                    />
                                </div>

                                {difficultyColumn && (
                                    <MultiSelectFilter
                                        column={difficultyColumn}
                                        label="Difficulty"
                                        icon="fas fa-signal"
                                        options={[
                                            { value: 'Easy', label: '🟢 Easy', activeClass: 'border-lc-easy bg-lc-easy/15 text-lc-easy' },
                                            { value: 'Medium', label: '🟡 Medium', activeClass: 'border-lc-medium bg-lc-medium/15 text-lc-medium' },
                                            { value: 'Hard', label: '🔴 Hard', activeClass: 'border-lc-hard bg-lc-hard/15 text-lc-hard' }
                                        ]}
                                    />
                                )}

                                {paidOnlyColumn && (
                                    <SelectFilter
                                        column={paidOnlyColumn}
                                        label="Access"
                                        icon="fas fa-unlock-alt"
                                        options={[
                                            { value: 'free', label: '✓ Free Only' },
                                            { value: 'premium', label: '👑 Premium' }
                                        ]}
                                    />
                                )}

                                {doneColumn && (
                                    <SelectFilter
                                        column={doneColumn}
                                        label="Status"
                                        icon="fas fa-check-circle"
                                        options={[
                                            { value: 'done', label: '✅ Done' },
                                            { value: 'notdone', label: '⬜ Not Done' }
                                        ]}
                                    />
                                )}

                                {columnFilters.length > 0 && (
                                    <button onClick={() => setColumnFilters([])} className="text-sm text-red-500 hover:text-red-600 font-medium">
                                        <i className="fas fa-times mr-1"></i>Clear
                                    </button>
                                )}

                                <div className="ml-auto flex items-center gap-2">
                                    <span className="text-sm text-gray-500 hidden sm:block">{rows.length} results</span>
                                    <ColumnDropdown table={table} />
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Table */}
                    <main className="flex-1 overflow-hidden p-2 sm:p-4">
                        <div className="h-full max-w-[1800px] mx-auto bg-white dark:bg-dark-850 rounded-xl border border-gray-200 dark:border-dark-700 shadow-sm flex flex-col overflow-hidden">
                            {/* Scrollable Body (header inside for synced horizontal scroll) */}
                            <div ref={containerRef} className="flex-1 overflow-auto">
                                {/* Sticky Header */}
                                <div className="bg-gray-50 dark:bg-dark-800 border-b-2 border-gray-200 dark:border-dark-600 sticky top-0 z-10"
                                    style={{ display: 'grid', gridTemplateColumns: gridCols, minWidth: 'max-content' }}>
                                    {table.getHeaderGroups()[0].headers.filter(h => h.column.getIsVisible()).map(h => (
                                        <div key={h.id}
                                            className="cell text-xs font-bold text-gray-600 dark:text-gray-300 uppercase tracking-wide select-none hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors relative group">

                                            <div onClick={h.column.getToggleSortingHandler()} className={`flex items-center gap-1 w-full h-full ${h.column.getCanSort() ? 'cursor-pointer' : ''}`}>
                                                <span>{typeof h.column.columnDef.header === 'function' ? flexRender(h.column.columnDef.header, h.getContext()) : h.column.columnDef.header}</span>
                                                {h.column.getIsSorted() === 'asc' && <i className="fas fa-caret-up ml-1 text-brand-500"></i>}
                                                {h.column.getIsSorted() === 'desc' && <i className="fas fa-caret-down ml-1 text-brand-500"></i>}
                                                {h.column.columnDef.meta?.hasDropdownFilter && (h.id === 'topicTags' || h.id === 'problemSets') && (
                                                    <div onClick={e => e.stopPropagation()}>
                                                        <CheckboxFilterDropdown
                                                            column={h.column}
                                                            allOptions={h.id === 'topicTags' ? allTopics : allProblemSets}
                                                        />
                                                    </div>
                                                )}
                                            </div>

                                            {h.column.getCanResize() && (
                                                <div
                                                    onMouseDown={h.getResizeHandler()}
                                                    onTouchStart={h.getResizeHandler()}
                                                    onClick={e => e.stopPropagation()}
                                                    className={`absolute right-0 top-0 h-full w-1.5 cursor-col-resize select-none touch-none hover:bg-brand-500 z-20 ${h.column.getIsResizing() ? 'bg-brand-500' : 'bg-transparent group-hover:bg-gray-300 dark:group-hover:bg-dark-600'}`}
                                                />
                                            )}
                                        </div>
                                    ))}
                                </div>
                                <div style={{ height: rowVirtualizer.getTotalSize(), position: 'relative', minWidth: 'max-content' }}>
                                    {rowVirtualizer.getVirtualItems().map(vRow => {
                                        const row = rows[vRow.index];
                                        return (
                                            <div key={row.id} data-index={vRow.index} ref={rowVirtualizer.measureElement}
                                                style={{ position: 'absolute', top: 0, left: 0, width: '100%', transform: `translateY(${vRow.start}px)`, display: 'grid', gridTemplateColumns: gridCols }}
                                                className={`border-b border-gray-100 dark:border-dark-700/50 hover:bg-blue-50/80 dark:hover:bg-blue-900/10 transition-colors ${vRow.index % 2 ? 'bg-gray-50/50 dark:bg-dark-800/30' : ''}`}>
                                                {row.getVisibleCells().map(cell => (
                                                    <div key={cell.id} className="cell">{flexRender(cell.column.columnDef.cell, cell.getContext())}</div>
                                                ))}
                                            </div>
                                        );
                                    })}
                                </div>
                                {rows.length === 0 && (
                                    <div className="p-12 text-center">
                                        <i className="fas fa-search text-4xl text-gray-300 dark:text-gray-600 mb-3"></i>
                                        <p className="text-gray-500 text-lg">No problems found</p>
                                        <button onClick={() => { setGlobalFilter(''); setColumnFilters([]); }} className="mt-3 text-brand-500 hover:text-brand-600 font-medium">
                                            Clear all filters
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    </main>

                    {/* Footer */}
                    <footer className="bg-white dark:bg-dark-850 border-t border-gray-200 dark:border-dark-700 py-3 text-center text-sm text-gray-500">
                        Made with <span className="text-red-500">❤️</span> by <a href="https://github.com/noworneverev" target="_blank" rel="noopener noreferrer" className="text-brand-500 hover:underline font-medium">Yan-Ying Liao</a>
                    </footer>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>

</html>